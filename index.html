<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Encrypted Message</title>

  <style>
    :root { --letter-gap: 0.55em; }

    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:#0b0c10;
      color:#eaf2ff;
    }

    .wrap{
      width:min(980px,92vw);
      text-align:center;
      padding:24px 16px;
    }

    .line1{
      font-size:clamp(26px,4vw,44px);
      font-weight:800;
      letter-spacing:0.10em;
      margin-bottom:10px;
      text-transform:uppercase;
      transition:text-shadow 0.3s ease, color 0.3s ease;
    }

    .success{
      color:#9dffb0;
      text-shadow: 0 0 8px rgba(157,255,176,0.8),
                   0 0 18px rgba(157,255,176,0.6);
    }

    .status{
      height:1.2em;
      font-size:14px;
      letter-spacing:0.2em;
      opacity:0;
      transition:opacity 0.3s ease;
    }
    .status.show{ opacity:0.9; }

    .alpha{
      font-family:ui-monospace,monospace;
      font-size:clamp(16px,2.2vw,26px);
      letter-spacing:var(--letter-gap);
      white-space:nowrap;
      margin:12px 0;
    }

    .controls{
      display:inline-flex;
      gap:10px;
      margin-top:8px;
    }

    button{
      background:rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.18);
      color:inherit;
      padding:10px 14px;
      border-radius:12px;
      cursor:pointer;
    }

    .hint{
      margin-top:10px;
      font-size:13px;
      opacity:0.75;
    }
  </style>
</head>

<body>
<div class="wrap">
  <div class="line1" id="decoded">_____</div>
  <div class="status" id="status">✓ CORRECT</div>

  <div class="alpha" id="alphaStatic"></div>
  <div class="alpha" id="alphaShifted"></div>

  <div class="controls">
    <button id="left">←</button>
    <button id="right">→</button>
  </div>

  <div class="hint">Shift the bottom alphabet (← / →)</div>
</div>

<script>
/*********************************************************
 * CONFIGURATION – EDIT ONLY THESE VALUES
 *********************************************************/
const PLAINTEXT = "lego bonsai";   // message to encrypt
const SHIFT = 11;                 // Caesar shift
const ALPHABET_MODE = "standard"; // "standard" or "pl"
/*********************************************************/

/* Available alphabets */
const ALPHABETS = {
  standard: "abcdefghijklmnopqrstuvwxyz",
  pl: "aąbcćdeęfghijklłmnńoópqrsśtuvwxyzźż"
};

const alphabet = ALPHABETS[ALPHABET_MODE].split("");
const N = alphabet.length;

/* Elements */
const decodedEl = document.getElementById("decoded");
const statusEl  = document.getElementById("status");
const staticEl  = document.getElementById("alphaStatic");
const shiftedEl = document.getElementById("alphaShifted");

/* Normalize shift */
const TARGET_SHIFT = ((SHIFT % N) + N) % N;

/* Caesar encryption */
function encrypt(text, shift) {
  const s = ((shift % N) + N) % N;
  let result = "";

  for (const ch of text) {
    const lower = ch.toLowerCase();
    const index = alphabet.indexOf(lower);

    if (index === -1) {
      result += ch;
      continue;
    }

    const enc = alphabet[(index + s) % N];
    result += (ch === lower) ? enc : enc.toUpperCase();
  }
  return result;
}

/* Encrypted message */
const CIPHER_TEXT = encrypt(PLAINTEXT, TARGET_SHIFT);

/* Interactive state */
let currentAlphabet = [...alphabet];
let currentShift = 0;
let wasCorrect = false;

/* Render alphabet */
function render(el, arr) {
  el.textContent = arr.join("");
}

/* Decode using current alphabet */
function decode() {
  let output = "";

  for (const ch of CIPHER_TEXT) {
    const lower = ch.toLowerCase();
    const index = alphabet.indexOf(lower);

    if (index === -1) {
      output += ch;
      continue;
    }

    const plain = currentAlphabet[index];
    output += (ch === lower) ? plain : plain.toUpperCase();
  }

  decodedEl.textContent = output.toUpperCase();

  const success = currentShift === TARGET_SHIFT;
  decodedEl.classList.toggle("success", success);
  statusEl.classList.toggle("show", success);

  if (success && !wasCorrect) clickSound();
  wasCorrect = success;
}

/* Shift alphabet */
function shiftAlphabet(dir) {
  if (dir === 1) {
    currentAlphabet.unshift(currentAlphabet.pop());
    currentShift = (currentShift + 1) % N;
  } else {
    currentAlphabet.push(currentAlphabet.shift());
    currentShift = (currentShift + N - 1) % N;
  }

  render(shiftedEl, currentAlphabet);
  decode();
}

/* Simple click sound */
let audioCtx;
function clickSound() {
  if (!audioCtx) audioCtx = new AudioContext();
  const t = audioCtx.currentTime;

  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();

  osc.frequency.value = 900;
  gain.gain.setValueAtTime(0.0001, t);
  gain.gain.exponentialRampToValueAtTime(0.04, t + 0.005);
  gain.gain.exponentialRampToValueAtTime(0.0001, t + 0.06);

  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.start(t);
  osc.stop(t + 0.07);
}

/* Init */
render(staticEl, alphabet);
render(shiftedEl, currentAlphabet);
decode();

/* Controls */
document.getElementById("left").onclick  = () => shiftAlphabet(-1);
document.getElementById("right").onclick = () => shiftAlphabet(1);

window.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft")  shiftAlphabet(-1);
  if (e.key === "ArrowRight") shiftAlphabet(1);
});
</script>
</body>
</html>
